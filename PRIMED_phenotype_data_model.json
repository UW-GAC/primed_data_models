{
  "name": "PRIMED Phenotype Data Model",
  "description": "Data model for phenotype data in the PRIMED consortium",
  "version": "0",
  "tables": [
    {
      "table": "subject",
      "required": false,
      "columns": [
        {
          "column": "subject_id",
          "primary_key": true,
          "required": true,
          "description": "subject/participant Identifier within project",
          "data_type": "string"
        },
        {
          "column": "dbgap_subject_id",
          "description": "subject identifier used by dbGaP (if available)",
          "data_type": "string"
        },
        {
          "column": "consent_code",
          "required": true,
          "description": "consent abbreviation (https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4721915/table/pgen.1005772.t001/?report=objectonly)",
          "data_type": "string"
        },
        {
          "column": "study_nickname",
          "required": true,
          "description": "short name for study as defined by CC",
          "data_type": "string"
        },
        {
          "column": "study_cohort",
          "description": "a distinct subgroup within a study often related to study design",
          "data_type": "string"
        },
        {
          "column": "dbgap_submission",
          "description": "flag if subject has been submitted to dbGaP",
          "data_type": "boolean",
          "examples": ["TRUE", "FALSE"]
        },
        {
          "column": "dbgap_study_id",
          "description": "PHS ID for study",
          "data_type": "string"
        },
        {
          "column": "reported_sex",
          "required": true,
          "description": "reported sex",
          "data_type": "enumeration",
          "enumerations": ["F", "M", "X"]
        }
      ]
    },
    {
      "table": "cohort_data",
      "required": false,
      "columns": [
        {
          "column": "<unique_table_name>_id",
          "data_type": "string",
          "references": "from: subject_id, age_at_observation",
          "notes": "auto-generated by CC using subject_id and age"
        },
        {
          "column": "subject_id",
          "required": true,
          "description": "the PRIMED subject id",
          "data_type": "string",
          "references": "> subject.subject_id",
          "notes": "references subject_id in participant table"
        },
        {
          "column": "age_at_observation",
          "required": true,
          "description": "the age at which the observation or measurement for the phenotype of interest was taken",
          "data_type": "float",
          "examples": " 56"
        },
        {
          "column": "<trait_1>",
          "required": true,
          "description": "an observation or measurement of a phenotype of interest",
          "data_type": "float",
          "examples": "137",
          "notes": "e.g.,TRIG"
        },
        {
          "column": "<trait_2>",
          "data_type": "float",
          "examples": " 88",
          "notes": "e.g., BMI"
        },
        {
          "column": "<trait_3>",
          "data_type": "float",
          "examples": "  0",
          "notes": "e.g., lipids medication use"
        },
        {
          "column": "visit",
          "description": "visit identifier",
          "data_type": "string",
          "examples": "  4",
          "notes": "different studies may define and capture visit identifiers differently"
        }
      ]
    },
    {
      "table": "cohort_metadata",
      "required": false,
      "columns": [
        {
          "column": "table_name_id",
          "required": true,
          "description": "the phenotype dataset that accompanies this metadata table",
          "data_type": "string",
          "references": "> cohort_data.<table_name>_id",
          "examples": "lipids_dataset_1"
        },
        {
          "column": "trait",
          "data_type": "string",
          "notes": "Column name in the cohort data table"
        },
        {
          "column": "concept_id",
          "required": true,
          "description": "unique concept id for <trait> from omop concept table",
          "data_type": "string",
          "references": "> omop_concept.concept_id",
          "notes": "references concept in omop concept table. OMOP concept table should be in the consortium phenotype inventory workspace"
        },
        {
          "column": "definition",
          "required": true,
          "description": "description of how <trait> phenotype was defined or measured",
          "data_type": "string",
          "examples": "high density lipoprotein. a type of lipid that transports cholesterol from tissues to the liver."
        },
        {
          "column": "unit",
          "required": true,
          "description": "unit of measurement for <trait> phenotype",
          "data_type": "string",
          "examples": "mg/dL"
        },
        {
          "column": "algorithm",
          "description": "algorithms used to calculate or adjust <trait> measurements",
          "data_type": "string",
          "examples": "Friedewald's formula"
        },
        {
          "column": "use",
          "required": true,
          "description": "intended use of the <trait> variable",
          "data_type": "string",
          "notes": "outcome vs covariate?"
        },
        {
          "column": "data_type",
          "required": true,
          "description": "data type of variable",
          "data_type": "enumeration",
          "enumerations": ["string", "numeric", "integer"],
          "examples": "string, numeric, integer, etc."
        }
      ]
    },
    {
      "table": "population_descriptor",
      "required": false,
      "columns": [
        {
          "column": "population_descriptor_id",
          "primary_key": true,
          "data_type": "string",
          "references": "from: subject_id, population_descriptor, descriptor_type"
        },
        {
          "column": "subject_id",
          "required": true,
          "data_type": "string",
          "references": "> subject.subject_id",
          "notes": "overlap with omop-person"
        },
        {
          "column": "population_descriptor",
          "required": true,
          "description": "any descriptor used to describe individual",
          "data_type": "string",
          "multi_value_delimiter": "|",
          "examples": "Black | Asian | Not Hispanic",
          "notes": "delimited list (delim is '|'). race and ethnicity info are in the omop-person table"
        },
        {
          "column": "descriptor_type",
          "required": true,
          "description": "type of descriptor used to describe individual",
          "data_type": "string",
          "multi_value_delimiter": "|",
          "examples": "Race | Race | Ethnicity",
          "notes": "delimited list same length as population_descriptor (delim is '|')"
        },
        {
          "column": "country_of_recruitment",
          "data_type": "string",
          "examples": "USA"
        },
        {
          "column": "country_of_birth",
          "data_type": "string",
          "examples": "USA"
        }
      ]
    },
    {
      "table": "population_descriptor_dataset",
      "required": false,
      "columns": [
        {
          "column": "population_descriptor_dataset_id",
          "primary_key": true,
          "data_type": "string",
          "references": "from: pop_desc_data_file_path"
        },
        {
          "column": "study_nickname",
          "required": true,
          "description": "short name for study",
          "data_type": "string",
          "examples": "HPFS"
        },
        {
          "column": "pop_desc_data_file_path",
          "required": true,
          "description": "file path to data file in cloud storage",
          "data_type": "string",
          "examples": "gs://blah/blah/HPFS_PopDesc_Data_20220625.txt"
        },
        {
          "column": "pop_desc_dd_file_path",
          "required": true,
          "description": "file path to data dictionary in cloud storage",
          "data_type": "string",
          "examples": "gs://blah/blah/HPFS_PopDesc_DD_20220625.txt",
          "notes": "Recommended columns for the data dictionary: var_name description values (delimited list) - if values are encoded, list them here (e.g. 1;2;3;4;5;6;7;8;999) labels (delimited list) - if values are encoded, list their meanings here (e.g. Southern European/Mediterranean;Scandanavian;Other Caucasian;African American;Hispanic;Asian;Native American;Other;Missing) source (e.g. 1992 questionnaire)"
        }
      ]
    },
    {
      "table": "person",
      "required": false,
      "columns": [
        {
          "column": "person_id",
          "primary_key": true,
          "required": true,
          "data_type": "integer"
        },
        {
          "column": "gender_concept_id",
          "required": true,
          "data_type": "integer",
          "notes": "overlap with subject table"
        },
        {
          "column": "year_of_birth",
          "data_type": "integer"
        },
        {
          "column": "month_of_birth",
          "data_type": "integer",
          "notes": "Remove. Does not meet data privacy requirements"
        },
        {
          "column": "day_of_birth",
          "data_type": "integer",
          "notes": "Remove. Does not meet data privacy requirements"
        },
        {
          "column": "birth_datetime",
          "data_type": "date",
          "notes": "Remove. Does not meet data privacy requirements"
        },
        {
          "column": "race_concept_id",
          "required": true,
          "data_type": "integer",
          "notes": "info in pop-desc table"
        },
        {
          "column": "ethnicity_concept_id",
          "required": true,
          "data_type": "integer",
          "notes": "info in pop-desc table"
        },
        {
          "column": "location_id",
          "data_type": "integer"
        },
        {
          "column": "provider_id",
          "data_type": "integer"
        },
        {
          "column": "care_site_id",
          "data_type": "integer"
        },
        {
          "column": "person_source_value",
          "data_type": "string"
        },
        {
          "column": "gender_source_value",
          "data_type": "string"
        },
        {
          "column": "gender_source_concept_id",
          "data_type": "integer"
        },
        {
          "column": "race_source_value",
          "data_type": "string"
        },
        {
          "column": "race_source_concept_id",
          "data_type": "integer"
        },
        {
          "column": "ethnicity_source_value",
          "data_type": "string"
        },
        {
          "column": "ethnicity_source_concept_id",
          "data_type": "integer"
        }
      ]
    },
    {
      "table": "measurement",
      "required": false,
      "columns": [
        {
          "column": "person_id",
          "required": true,
          "description": "FK to person in person table",
          "data_type": "integer",
          "references": "> omop_person.person_id",
          "notes": "overlap with cohort data table"
        },
        {
          "column": "measurement_id",
          "primary_key": true,
          "required": true,
          "description": "unique id for each measurement",
          "data_type": "integer"
        },
        {
          "column": "measurement_concept_id",
          "required": true,
          "description": "FK to standard measurement concept identifier in the concept table",
          "data_type": "integer",
          "notes": "overlap with metadata table"
        },
        {
          "column": "measurement_date",
          "required": true,
          "description": "date of measurement",
          "data_type": "date",
          "notes": "year is okay, but not date. would need year of birth to make any calculations on age. may be best to convert to age_at_measurement."
        },
        {
          "column": "measurement_datetime",
          "description": "date and time of measurement",
          "data_type": "date",
          "notes": "remove"
        },
        {
          "column": "measurement_type_concept_id",
          "required": true,
          "description": "FK reflecting provenance of concept and linked to concept table",
          "data_type": "integer"
        },
        {
          "column": "operator_concept_id",
          "data_type": "integer"
        },
        {
          "column": "value_as_number",
          "description": "measurement result when measurement is expressed as a numerical value",
          "data_type": "float",
          "notes": "overlap with cohort data table"
        },
        {
          "column": "value_as_concept_id",
          "description": "concept of the value",
          "data_type": "integer"
        },
        {
          "column": "unit_concept_id",
          "data_type": "integer"
        },
        {
          "column": "range_low",
          "description": "lower limit of normal range for this measurement",
          "data_type": "float"
        },
        {
          "column": "range_high",
          "description": "upper limit of normal range for this measurement",
          "data_type": "integer"
        },
        {
          "column": "provider_id",
          "description": "FK for provider responsible for initiating or obtaining measurement",
          "data_type": "integer",
          "notes": "what exactly is this and can this be considered identifying information"
        },
        {
          "column": "visit_occurrence_id",
          "required": true,
          "description": "FK for visit at which measurement was obtained",
          "data_type": "string",
          "notes": "overlap with cohort data table"
        },
        {
          "column": "measurement_source_concept_id",
          "description": "FK code used in source data for this concept",
          "data_type": "integer"
        },
        {
          "column": "measurement_source_value",
          "description": "source code for how unit appears in source data",
          "data_type": "string"
        }
      ]
    },
    {
      "table": "concept",
      "required": false,
      "columns": [
        {
          "column": "concept_id",
          "primary_key": true,
          "required": true,
          "data_type": "string",
          "examples": "313127"
        },
        {
          "column": "concept_name",
          "required": true,
          "description": "name of concept",
          "data_type": "string",
          "examples": "Atrial Fibrillation"
        },
        {
          "column": "domain_id",
          "required": true,
          "description": "biomedical domain",
          "data_type": "string",
          "examples": "Condition"
        },
        {
          "column": "vocabulary_id",
          "required": true,
          "description": "ontology used for concept",
          "data_type": "string",
          "examples": "SNOMED"
        },
        {
          "column": "concept_class_id",
          "required": true,
          "description": "attribute or concept class of concept",
          "data_type": "string",
          "examples": "Clinical finding"
        },
        {
          "column": "standard_concept",
          "data_type": "enumeration",
          "enumerations": ["S", "C", "N"],
          "examples": "S",
          "notes": "enumeration: S (standard concept); C (classification concept); N (Null)"
        },
        {
          "column": "concept_code",
          "required": true,
          "data_type": "string",
          "examples": "49436004"
        },
        {
          "column": "valid_start_date",
          "required": true,
          "description": "start date that concept began",
          "data_type": "date",
          "examples": "1970-01-28"
        },
        {
          "column": "valid_end_date",
          "required": true,
          "description": "end date when concept became invalid",
          "data_type": "date",
          "examples": "2020-12-31"
        },
        {
          "column": "invalid_reason",
          "description": "reason for concept invalidation",
          "data_type": "string",
          "examples": "change in guidelines"
        }
      ]
    }
  ]
}
